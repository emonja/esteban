<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CRYPTOGRAPHER â€” ESTEBAN DE LA MONJA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f0f0ed; --text: #121212; --pink: #ff007f; --copper: #FFB300; --patina: #40E0D0;
        }
        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Archivo Black', sans-serif; padding: 20px;
            overflow: hidden;
        }
        .container { max-width: 600px; margin: 0 auto; position: relative; z-index: 10; }
        
        h1 { font-size: 1rem; letter-spacing: 5px; text-transform: uppercase; margin-bottom: 40px; text-align: center; }

        .io-group { margin-bottom: 30px; position: relative; }
        .label { font-family: 'Courier New', monospace; font-size: 10px; color: #bbb; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; }
        
        textarea {
            width: 100%; height: 120px; background: transparent; border: 2px solid var(--text);
            color: var(--text); font-family: inherit; font-size: 1.5rem; padding: 15px;
            resize: none; outline: none; text-transform: uppercase;
        }

        /* Glitch Layers for Output */
        .output-wrapper { position: relative; }
        .glitch-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; opacity: 0; font-size: 1.5rem; padding: 15px;
            line-height: 1.2; word-break: break-all;
        }

        .toggle-zone { text-align: center; margin-bottom: 20px; }
        .btn-switch {
            background: var(--patina); border: none; padding: 10px 20px;
            font-family: inherit; font-size: 0.7rem; cursor: pointer;
            letter-spacing: 2px; text-transform: uppercase;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Signal Cryptographer</h1>

        <div class="toggle-zone">
            <button class="btn-switch" id="mode-btn">Direction: Text > Morse</button>
        </div>

        <div class="io-group">
            <span class="label" id="label-in">Input Source</span>
            <textarea id="input" placeholder="Begin sequence..."></textarea>
        </div>

        <div class="io-group">
            <span class="label" id="label-out">Generated Output</span>
            <div class="output-wrapper">
                <textarea id="output" readonly></textarea>
                <div class="glitch-layer" id="layer1" style="color: var(--pink);"></div>
                <div class="glitch-layer" id="layer2" style="color: var(--copper);"></div>
            </div>
        </div>
    </div>

<script>
    const LIB = { 'A': '.-', 'B': '-...', 'C': '-.-.', 'D': '-..', 'E': '.', 'F': '..-.', 'G': '--.', 'H': '....', 'I': '..', 'J': '.---', 'K': '-.-', 'L': '.-..', 'M': '--', 'N': '-.', 'O': '---', 'P': '.--.', 'Q': '--.-', 'R': '.-.', 'S': '...', 'T': '-', 'U': '..-', 'V': '...-', 'W': '.--', 'X': '-..-', 'Y': '-.--', 'Z': '--..', ' ': '/' };
    const REV = Object.fromEntries(Object.entries(LIB).map(([k, v]) => [v, k]));

    let isMorseInput = false;
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    const l1 = document.getElementById('layer1');
    const l2 = document.getElementById('layer2');

    document.getElementById('mode-btn').addEventListener('click', function() {
        isMorseInput = !isMorseInput;
        this.innerText = isMorseInput ? "Direction: Morse > Text" : "Direction: Text > Morse";
        input.value = ""; output.value = "";
        input.placeholder = isMorseInput ? "- . - - -" : "Begin sequence...";
    });

    input.addEventListener('input', () => {
        const val = input.value.trim().toUpperCase();
        let result = "";

        if (!isMorseInput) {
            result = val.split('').map(c => LIB[c] || '').join(' ');
        } else {
            result = val.split(' ').map(s => REV[s] || (s === '/' ? ' ' : '')).join('');
        }

        output.value = result;
        l1.innerText = result;
        l2.innerText = result;

        // Visual Glitch on Input
        const offset = Math.random() * 5;
        l1.style.opacity = "0.5";
        l2.style.opacity = "0.5";
        l1.style.transform = `translate(${offset}px, ${offset}px)`;
        l2.style.transform = `translate(-${offset}px, -${offset}px)`;
        
        setTimeout(() => {
            l1.style.opacity = "0";
            l2.style.opacity = "0";
        }, 100);
    });
</script>
</body>
</html>